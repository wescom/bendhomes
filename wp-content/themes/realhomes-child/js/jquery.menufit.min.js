(function(c){c.fn.menuFit=function(m){function n(a){this.el=a;this.$el=c(a);this.$link=this.$el.children("a");c.extend(this,{width:Math.ceil(this.$el.width()),linkPaddingTop:function(){return parseInt(this.$link.css("padding-top"))},linkPaddingBottom:function(){return parseInt(this.$link.css("padding-bottom"))},single:!/[\d\w]\s[\d\w]/i.test(this.$link.html()),isMinWidth:!1,getLinkHeight:function(){return this.linkHeight=this.$link.height()+this.linkPaddingTop()+this.linkPaddingBottom()},getWidths:function(){var a=
    [Math.floor(this.$link.width()),0],g=this.$link.children("span");g.length&&(a[1]=Math.floor(g.width()));return a}});this.originalWidth=this.width;this.getLinkHeight()}var a=this;if(!this.length||a.data("menu-resize-action-set"))return this;a.data("menu-resize-action-set",!0);var e=c.extend({even:!1,mobileMenuID:"mobile-menu",start:function(){},done:function(){},manualTrigger:!1},m),h=c(this.find("ul").get(0)).children("li"),k=0,b=new function(a){c.extend(this,{collection:[],width:function(){var a=
    0;for(i in this.collection)isNaN(i)||(this.collection[i].width=this.collection[i].$el.width(),a+=this.collection[i].width);return a},fitWidthsTo:function(a){var b=a-this.width(),l=0>b,e=l?1:-1,d=!1;if(!b)return!1;for(;0!==b&&!d;)for(i in d=l,this.collection){if(0===b)break;l&&(this.collection[i].isMinWidth||this.collection[i].single&&this.collection[i].originalWidth>=this.collection[i].width)?this.collection[i].isMinWidth=!0:(d=this.collection[i].isMinWidth=!1,this.collection[i].width-=e,b+=e)}this.addInnerSpan();
    var f=0;c.each(this.collection,function(a){this.$el.css({width:this.width});this.width=this.getWidths()[1];f+=this.width});for(a-=f;0<a;)for(i in this.collection){a--;if(0>=a)break;this.collection[i].width++}c.each(this.collection,function(){this.$el.css({width:this.width})});this.stripInnerSpan();return!0},addInnerSpan:function(){c.each(this.collection,function(a){this.$link.wrapInner('<span style="display:inline"></span>')})},stripInnerSpan:function(){c.each(this.collection,function(a){this.$link.children("span").contents().unwrap()})},
    stripFitting:function(){c.each(this.collection,function(){this.$el.css({width:""});this.$link.css({"padding-top":"","padding-bottom":"",height:""})})}});var b=this;a.each(function(a){b.collection.push(new n(this))})}(h);if(!h.length)return this;a.on("menu:resize",function(){e.start(a,b);if(c("#"+e.mobileMenuID).is(":visible"))a.addClass("fit-disabled"),b.stripFitting(),k=0;else{a.removeClass("fit-disabled");var d=a.height(),f=a.width(),g=!1;if(!0===e.even){width=100/h.length;for(i in b.collection)b.collection[i].width=
    width+"%",b.collection[i].$el.css({width:b.collection[i].width});g=!0}else f!=k&&(g=!0,b.fitWidthsTo(f));a.hasClass("force-menu-resize")&&(a.removeClass("force-menu-resize"),g=!0);g&&(a.removeClass("menu-fit-failed"),c.each(b.collection,function(b){this.$link.css({height:""});if(this.getLinkHeight()!=d){var c=(this.linkHeight-d)/2;b=Math.max(this.linkPaddingTop()-Math.ceil(c),0);c=Math.max(this.linkPaddingBottom()-Math.floor(c),0);this.$link.css({"padding-top":b,"padding-bottom":c});0==b&&0==c&&this.$el.height()>
d&&(this.$link.css({height:d}),a.addClass("menu-fit-failed"))}}));a.addClass("fit");k=f;e.done(a,b)}});a.trigger("menu:resize");e.manualTrigger||c(window).resize(function(){a.trigger("menu:resize")});return this}})(jQuery);